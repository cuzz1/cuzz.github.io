<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>cuzz&#039;s blog</title><meta description="博客记录"><meta property="og:type" content="blog"><meta property="og:title" content="cuzz&#039;s blog"><meta property="og:url" content="http://blog.cuzz.site/"><meta property="og:site_name" content="cuzz&#039;s blog"><meta property="og:description" content="博客记录"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://blog.cuzz.site/img/og_image.png"><meta property="article:author" content="cuzz"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.cuzz.site"},"headline":"cuzz's blog","image":["http://blog.cuzz.site/img/og_image.png"],"author":{"@type":"Person","name":"John Doe"},"description":""}</script><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.13.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.0.2"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/cuzz1"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/10/20/CSAPP_Boom_Lab/"><img class="fill" src="https://picsum.photos/545/330" alt="Boom Lab"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-20T15:59:59.000Z" title="2020-10-20T15:59:59.000Z">2020-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.448Z" title="2020-10-30T17:28:09.448Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/20/CSAPP_Boom_Lab/">Boom Lab</a></h1><div class="content"><a id="more"></a>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CSAPP 这本书买了好几年，最近抽出一些时间开始重头读这本书，发现这些基础知识比较重要，边看书边跟着视频课程过了一遍，有些东西还是比较模糊。本文开始做 <a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">CSAPP Lab</a> 实验，加强巩固书的内容。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/10/20/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/"><img class="fill" src="https://picsum.photos/518/334" alt="汇编入门"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-20T15:59:59.000Z" title="2020-10-20T15:59:59.000Z">2020-10-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.801Z" title="2020-10-30T17:28:09.801Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/20/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/">汇编入门</a></h1><div class="content"><h2 id="从-C-语言到机器码"><a href="#从-C-语言到机器码" class="headerlink" title="从 C 语言到机器码"></a>从 C 语言到机器码</h2><p>先从一个非常简单的程序来看编译过程中发生了那些步骤。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们在 Unix 系统上终端上使用 GCC 进行编译：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; gcc -o hello hello.c</span><br></pre></td></tr></table></figure></div><a class="article-more button is-small size-small" href="/2020/10/20/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/"><img class="fill" src="https://picsum.photos/545/301" alt="浮点数在计算机中的表示"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-17T15:59:59.000Z" title="2020-10-17T15:59:59.000Z">2020-10-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.814Z" title="2020-10-30T17:28:09.814Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/">浮点数在计算机中的表示</a></h1><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>相信大家在编程过程中都有使用过浮点数，但是浮点数总是给我带来预期不一样的结果，下面展示了在 C 语言中的精度问题，发现使用浮点数总是会带来精度缺失。在学习和工作当中总能听到不能使用浮点数来表示金钱，会有精度缺失。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">float</span> a = <span class="number">0.1</span> + <span class="number">0.2</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a = %.20f\n&quot;</span>, a); <span class="comment">// 0.30000001192092895508</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是在一些特殊领域，单靠整数是无法满足精度要求，这个时候就需要用到浮点数。这边篇文章来解释浮点数在计算机中是如何表示。</p></div><a class="article-more button is-small size-small" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/10/11/CSAPP_Data_Lab/"><img class="fill" src="https://picsum.photos/527/305" alt="Data Lab"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-11T15:59:59.000Z" title="2020-10-11T15:59:59.000Z">2020-10-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.460Z" title="2020-10-30T17:28:09.460Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/11/CSAPP_Data_Lab/">Data Lab</a></h1><div class="content"><a id="more"></a>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>CSAPP 这本书买了好几年，最近抽出一些时间开始重头读这本书，发现这些基础知识比较重要，边看书边跟着视频课程过了一遍，有些东西还是比较模糊。本文开始做 <a target="_blank" rel="noopener" href="http://csapp.cs.cmu.edu/3e/labs.html">CSAPP Lab</a> 实验，加强巩固书的内容。</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>这个实验主要考察整数和单精度浮点数的表示以及位运算，加强深对对计算机数据表示的理解。</p>
<p>任务指引还是比较清晰的，主要有以下一些说明：</p>
<ol>
<li>整型的范围是 0 到 255(0xFF)，不允许用更大</li>
<li>只能包含参数和局部变量</li>
<li>一元操作符 <code>!</code> <code>~</code></li>
<li>二元操作符 <code>&amp;</code> <code>|</code> <code>+</code> <code>&lt;&lt;</code> <code>&gt;&gt;</code></li>
<li>浮点数可以使用控制语句</li>
</ol>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="bitXor"><a href="#bitXor" class="headerlink" title="bitXor"></a>bitXor</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp;</span></span><br><span class="line"><span class="comment"> *   Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> *   Max ops: 14</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bitXor</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ~(~(~x &amp; y) &amp; ~(x &amp; ~y));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异或就是二级制不相等才为1，同时为 0 或者同时为 1，结果为 0 ，比如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">十进制   二进制</span><br><span class="line">  4      100</span><br><span class="line">  5      101 </span><br><span class="line">         001 &#x2F;&#x2F; 异或结果</span><br></pre></td></tr></table></figure>

<p>其中<code>(~x &amp; y)</code> 表示 x 中的 0 和 y 中的 1，<code>(x &amp; ~y)</code>表示 x 中的 1和 y 中的 0，然后通过德·摩根定律<code>~(a &amp; b) = ~a | ~b</code>。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x ^ y &#x3D; (~x &amp; y) | (x &amp; ~y) &#x3D; ~(~(~x &amp; y) &amp; ~(x &amp; ~y))</span><br></pre></td></tr></table></figure>

<h3 id="tmin"><a href="#tmin" class="headerlink" title="tmin"></a>tmin</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * tmin - return minimum two&#x27;s complement integer</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 4</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">tmin</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个题目比较简单，int 有符号采用的是补码表示如图，最小为<code>10000000 00000000 00000000 00000000</code> 我们只需要把 1 往左移动 31 位就行。</p>
<center><img src="http://img.cuzz.site/20201011183216.jpeg" width="80%"></center>

<p>   </p>
<h3 id="isTmax"><a href="#isTmax" class="headerlink" title="isTmax"></a>isTmax</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isTmax - returns 1 if x is the maximum, two&#x27;s complement number,</span></span><br><span class="line"><span class="comment"> *     and 0 otherwise</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | +</span></span><br><span class="line"><span class="comment"> *   Max ops: 10</span></span><br><span class="line"><span class="comment"> *   Rating: 1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isTmax</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !(x + <span class="number">1</span> + x + <span class="number">1</span>) &amp; !!(~x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们发现最大值两倍加二为0，但是要排除 -1（补码全为1）后面<code>!!(~x)</code> 就是这个逻辑。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x                01111111 11111111 11111111 11111111</span><br><span class="line">x + 1            10000000 00000000 00000000 00000000</span><br><span class="line">x + 1 + x        11111111 11111111 11111111 11111111</span><br><span class="line">x + 1 + x + 1    00000000 00000000 00000000 00000000</span><br></pre></td></tr></table></figure>

<h3 id="allOddBits"><a href="#allOddBits" class="headerlink" title="allOddBits"></a>allOddBits</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * allOddBits - return 1 if all odd-numbered bits in word set to 1</span></span><br><span class="line"><span class="comment"> *   where bits are numbered from 0 (least significant) to 31 (most significant)</span></span><br><span class="line"><span class="comment"> *   Examples allOddBits(0xFFFFFFFD) = 0, allOddBits(0xAAAAAAAA) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">allOddBits</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> e = <span class="number">0xAA</span> | (<span class="number">0xAA</span> &lt;&lt; <span class="number">8</span>);</span><br><span class="line">    e = e | (e &lt;&lt; <span class="number">16</span>);</span><br><span class="line">    <span class="keyword">return</span> !((e &amp; x) ^ e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先获取全为奇数位的数，这里的奇数指的是位的阶级是 2 的几次幂。然后取并如果偶数为有值，那么异或之后就不会为0。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 10101010 10101010 10101010 10101010</span></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0xAA</span>;        <span class="comment">// 00000000 00000000 00000000 10101010</span></span><br><span class="line"><span class="keyword">int</span> b = <span class="number">0xAA</span> &lt;&lt; <span class="number">8</span>;   <span class="comment">// 00000000 00000000 10101010 00000000</span></span><br><span class="line"><span class="keyword">int</span> c = a | b;       <span class="comment">// 00000000 00000000 10101010 10101010</span></span><br><span class="line"><span class="keyword">int</span> d = c &lt;&lt; <span class="number">16</span>;     <span class="comment">// 10101010 10101010 00000000 00000000</span></span><br><span class="line"><span class="keyword">int</span> e = c | d;       <span class="comment">// 10101010 10101010 10101010 10101010</span></span><br></pre></td></tr></table></figure>

<h3 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * negate - return -x</span></span><br><span class="line"><span class="comment"> *   Example: negate(1) = -1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 5</span></span><br><span class="line"><span class="comment"> *   Rating: 2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">negate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ~x + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以发现取反之后两个之和为 -1，<code>x + ~x = -1</code>，那么<code>-x = ~x + 1</code>然后只需要取反加 1就行，</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> -8      -7   -6   -5   -4   -3   -2   -1   0    1    2    3    4    5    6    7</span><br><span class="line">1000 1001 1010 1011 1100 1101 1110 1111 0000 0001 0010 0011 0100 0101 0110 0111  </span><br><span class="line">0111 1001 0101 0100 0011 0010 0001 0000 1111 1110 1101 1100 1011 1010 1001 1000</span><br><span class="line">  7    6    5    4    3   2    1     0    -1   -2   -3   -4  -5   -6   -7   -8</span><br></pre></td></tr></table></figure>

<h3 id="isAsciiDigit"><a href="#isAsciiDigit" class="headerlink" title="isAsciiDigit"></a>isAsciiDigit</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isAsciiDigit - return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters &#x27;0&#x27; to &#x27;9&#x27;)</span></span><br><span class="line"><span class="comment"> *   Example: isAsciiDigit(0x35) = 1.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x3a) = 0.</span></span><br><span class="line"><span class="comment"> *            isAsciiDigit(0x05) = 0.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 15</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isAsciiDigit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> min = <span class="number">0x1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">       <span class="keyword">int</span> max = ~min;</span><br><span class="line">       <span class="keyword">int</span> start = ~<span class="number">0x39</span>;</span><br><span class="line">       <span class="keyword">int</span> end = max - <span class="number">0x30</span> + <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">int</span> c = (x + start) &gt;&gt; <span class="number">31</span>;</span><br><span class="line">       <span class="keyword">int</span> d = (x + end) &gt;&gt; <span class="number">31</span>;</span><br><span class="line">       <span class="comment">// printf(&quot;x=%d, c=%d, d=%d\n&quot;,x, c, d);</span></span><br><span class="line">       <span class="keyword">return</span> !!(c &amp; d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>比如保证<code> a + start &lt; 0</code> 并且<code> b + start &lt; 0</code>，然后 <code>a + end &lt; 0</code> 并且 <code>b + end &lt; 0</code>，这个时候是溢出小于零。根据如果 x 为负数<code>x &gt;&gt; 31 = -1</code>，否者 <code>x &gt;&gt; 31 = 0</code>，再通过两次去反获得。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> -8      -7   -6   -5   -4   -3   -2   -1   0    1    2    3    4    5    6    7</span><br><span class="line">1000 1001 1010 1011 1100 1101 1110 1111 0000 0001 0010 0011 0100 0101 0110 0111  </span><br><span class="line"> </span><br><span class="line">a &lt;&#x3D; x &lt;&#x3D; b   1 &lt;&#x3D; x &lt;&#x3D; 3    2&lt;&#x3D; x &lt;&#x3D; 5 </span><br><span class="line"></span><br><span class="line">start  end      -4       7     -6       6</span><br><span class="line">   </span><br><span class="line">-y &#x3D; ~y + 1</span><br><span class="line"></span><br><span class="line">start + b &#x3D; -1     &#x3D;&gt; start &#x3D; -1 - b &#x3D; ~b</span><br><span class="line">a + end &#x3D; max + 1  &#x3D;&gt; end &#x3D; max + 1 - a &#x3D; max - a + 1</span><br></pre></td></tr></table></figure>

<h3 id="conditional"><a href="#conditional" class="headerlink" title="conditional"></a>conditional</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * conditional - same as x ? y : z</span></span><br><span class="line"><span class="comment"> *   Example: conditional(2,4,5) = 4</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 16</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">conditional</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> z)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mask = ~!x + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (y &amp; ~mask) | (z &amp; mask);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是一个if-else 语句，我们可以转化为 <code>(y op expr) | (z op expr)</code>，其中 <code>op</code> 为操作符，<code>expr</code> 为表达式。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">(y op expr) | (z op expr)</span><br><span class="line"></span><br><span class="line">x &#x3D;&#x3D; 0  mask &#x3D; 0xFFFFFFF</span><br><span class="line">x !&#x3D; 0  mask &#x3D; 0xOOOOOOO</span><br></pre></td></tr></table></figure>

<h3 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0</span></span><br><span class="line"><span class="comment"> *   Example: isLessOrEqual(4,5) = 1.</span></span><br><span class="line"><span class="comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 24</span></span><br><span class="line"><span class="comment"> *   Rating: 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLessOrEqual</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x_sign = (x &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>; <span class="comment">// x 的符号</span></span><br><span class="line">    <span class="keyword">int</span> y_sign = (y &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>; <span class="comment">// y 的符号</span></span><br><span class="line">    <span class="keyword">int</span> a = !(x ^ y);</span><br><span class="line">    <span class="keyword">int</span> b = (x_sign &amp; (!y_sign)); <span class="comment">// 判断是否 x &lt; 0 y &gt; 0</span></span><br><span class="line">    <span class="keyword">int</span> c = (!((x_sign ^ y_sign) &amp; <span class="number">0x01</span>)); <span class="comment">// 判断符号是否相等</span></span><br><span class="line">    <span class="comment">// x - y = x + ~y + 1</span></span><br><span class="line">    <span class="keyword">int</span> res_sign = ((x + ~y + <span class="number">1</span>) &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;<span class="comment">// 判断x-y的符号</span></span><br><span class="line">    <span class="keyword">return</span> a | b | (c &amp; res_sign);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用 <code>x - y</code> 通过符号来判断，但是可能会溢出，所以当符号不相同就可以直接判断大小。</p>
<table>
<thead>
<tr>
<th align="center">x</th>
<th align="center">y</th>
<th align="center">x - y</th>
</tr>
</thead>
<tbody><tr>
<td align="center">x &gt; 0</td>
<td align="center">y &gt; 0</td>
<td align="center">正常</td>
</tr>
<tr>
<td align="center">x &gt; 0</td>
<td align="center">y &lt; 0</td>
<td align="center">可能向上溢出</td>
</tr>
<tr>
<td align="center">x &lt; 0</td>
<td align="center">y &gt; 0</td>
<td align="center">可能向下溢出</td>
</tr>
<tr>
<td align="center">x &lt; 0</td>
<td align="center">y &lt; 0</td>
<td align="center">正常</td>
</tr>
</tbody></table>
<p>主要分为3部，</p>
<ul>
<li>看看是否两个数相等 <code>!(x ^ y)</code> 如果相等为1</li>
<li>判断符号是否相反，主要看 x &lt; 0，y  &gt; 0</li>
<li>判断符号相等的时候，x - y &lt; 0</li>
</ul>
<h3 id="logicalNeg"><a href="#logicalNeg" class="headerlink" title="logicalNeg"></a>logicalNeg</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * logicalNeg - implement the ! operator, using all of</span></span><br><span class="line"><span class="comment"> *              the legal operators except !</span></span><br><span class="line"><span class="comment"> *   Examples: logicalNeg(3) = 0, logicalNeg(0) = 1</span></span><br><span class="line"><span class="comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *   Max ops: 12</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">logicalNeg</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> neg_x = ~x + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> ((neg_x | x) &gt;&gt; <span class="number">31</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>求  <code>x | -x</code> ，如果 x 不为 0 的化，那么符号位一定为 1，如果 x 为 0 那么符号为0。</p>
<h3 id="howManyBits"><a href="#howManyBits" class="headerlink" title="howManyBits"></a>howManyBits</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* howManyBits - return the minimum number of bits required to represent x in</span></span><br><span class="line"><span class="comment"> *             two&#x27;s complement</span></span><br><span class="line"><span class="comment"> *  Examples: howManyBits(12) = 5               //  0_1100</span></span><br><span class="line"><span class="comment"> *            howManyBits(298) = 10             //  0_100101010</span></span><br><span class="line"><span class="comment"> *            howManyBits(-5) = 4               //  1_101</span></span><br><span class="line"><span class="comment"> *            howManyBits(0)  = 1               //  0</span></span><br><span class="line"><span class="comment"> *            howManyBits(-1) = 1               //  1</span></span><br><span class="line"><span class="comment"> *            howManyBits(1) =  2               //  0_1</span></span><br><span class="line"><span class="comment"> *            howManyBits(0x80000000) = 32</span></span><br><span class="line"><span class="comment"> *  Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> *  Max ops: 90</span></span><br><span class="line"><span class="comment"> *  Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">howManyBits</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> b16, b8, b4, b2, b1, b0;</span><br><span class="line">    <span class="keyword">int</span> mask = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">    <span class="comment">// 如果x为正数，保持不变；如果为负数，按位取反</span></span><br><span class="line">    x = (mask &amp; ~x) | (~mask &amp; x);</span><br><span class="line">    <span class="comment">// 如果高16位有1，b16 = 16，否者为0</span></span><br><span class="line">    b16 = !!(x &gt;&gt; <span class="number">16</span>) &lt;&lt; <span class="number">4</span>;</span><br><span class="line">    <span class="comment">// 如果高16位有1，x右移16位，在新的16为重继续找</span></span><br><span class="line">    x = x &gt;&gt; b16;</span><br><span class="line">    <span class="comment">// 高8</span></span><br><span class="line">    b8 = !!(x &gt;&gt; <span class="number">8</span>) &lt;&lt; <span class="number">3</span>;</span><br><span class="line">    x = x &gt;&gt; b8;</span><br><span class="line">    <span class="comment">// 高4位</span></span><br><span class="line">    b4 = !!(x &gt;&gt; <span class="number">4</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">    x = x &gt;&gt; b4;</span><br><span class="line">    <span class="comment">// 高2位</span></span><br><span class="line">    b2 = !!(x &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">    x = x &gt;&gt; b2;</span><br><span class="line">    <span class="comment">// 高1位</span></span><br><span class="line">    b1 = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    x = x &gt;&gt; b1;</span><br><span class="line">    <span class="comment">// 底1位</span></span><br><span class="line">    b0 = x;</span><br><span class="line">    <span class="keyword">return</span> b16 + b8 + b4 + b2 + b1 + b0 + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于正数，找到最左边的 1，对于负数，按位取反处理。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 1 1 1 0 0 0 1     b4 &#x3D; 4</span><br><span class="line">0 1 1 1             b2 &#x3D; 2</span><br><span class="line">0 1                 b1 &#x3D; 0</span><br><span class="line">  1                 b0 &#x3D; 1</span><br></pre></td></tr></table></figure>

<h3 id="floatScale2"><a href="#floatScale2" class="headerlink" title="floatScale2"></a>floatScale2</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatScale2 - Return bit-level equivalent of expression 2*f for</span></span><br><span class="line"><span class="comment"> *   floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Both the argument and result are passed as unsigned int&#x27;s, but</span></span><br><span class="line"><span class="comment"> *   they are to be interpreted as the bit-level representation of</span></span><br><span class="line"><span class="comment"> *   single-precision floating point values.</span></span><br><span class="line"><span class="comment"> *   When argument is NaN, return argument</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatScale2</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// sign  exp  frac</span></span><br><span class="line">    <span class="comment">//  1     8    23</span></span><br><span class="line">    <span class="keyword">unsigned</span> sign = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> frac = uf &amp; <span class="number">0x7FFFFF</span>;</span><br><span class="line">    <span class="comment">// 特殊</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0xFF</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> uf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 非规格化</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">exp</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        frac = frac &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 规格化</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">exp</span> ++;</span><br><span class="line">        <span class="keyword">return</span> (sign &lt;&lt; <span class="number">31</span>) | (<span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>) | frac;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先分别求出 <code>sign</code> ，<code>exp</code> 和 <code>frac</code>，如果是特殊值直接返回，在判断是否是规格化，分别处理。</p>
<center><img src="http://img.cuzz.site/20201017230919.png" width="80%"></center>

<h3 id="floatFloat2Int"><a href="#floatFloat2Int" class="headerlink" title="floatFloat2Int"></a>floatFloat2Int</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatFloat2Int - Return bit-level equivalent of expression (int) f</span></span><br><span class="line"><span class="comment"> *   for floating point argument f.</span></span><br><span class="line"><span class="comment"> *   Argument is passed as unsigned int, but</span></span><br><span class="line"><span class="comment"> *   it is to be interpreted as the bit-level representation of a</span></span><br><span class="line"><span class="comment"> *   single-precision floating point value.</span></span><br><span class="line"><span class="comment"> *   Anything out of range (including NaN and infinity) should return</span></span><br><span class="line"><span class="comment"> *   0x80000000u.</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">floatFloat2Int</span><span class="params">(<span class="keyword">unsigned</span> uf)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// sign  exp  frac</span></span><br><span class="line">    <span class="comment">//  1     8    23</span></span><br><span class="line">    <span class="keyword">unsigned</span> sign = (uf &gt;&gt; <span class="number">31</span>) &amp; <span class="number">0x01</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="built_in">exp</span> = (uf &gt;&gt; <span class="number">23</span>) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> frac_v = uf &amp; <span class="number">0x7FFFFF</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// E = exp - Bias = exp - 127</span></span><br><span class="line">    <span class="keyword">int</span> E = <span class="built_in">exp</span> - <span class="number">127</span>;</span><br><span class="line">    <span class="comment">// 超过范围</span></span><br><span class="line">    <span class="keyword">if</span> (E &gt;= <span class="number">31</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0x80000000</span>u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 小数</span></span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// M = frac + 1;</span></span><br><span class="line">    <span class="keyword">unsigned</span> unsigned_res = (frac_v &gt;&gt; (<span class="number">23</span> - E)) | (<span class="number">1</span> &lt;&lt; E);</span><br><span class="line">    <span class="keyword">if</span> (sign) &#123;</span><br><span class="line">        <span class="keyword">return</span> -unsigned_res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unsigned_res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把浮点数转化为有符号整数，<code>M = 1 + frac</code>，<code>frac</code> 一共 23 位，左移 <code>23 - E</code> 就获得我们想要的书，但是要加上隐藏的 1，最后根据符号位取相反数就行。</p>
<h3 id="floatPower2"><a href="#floatPower2" class="headerlink" title="floatPower2"></a>floatPower2</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * floatPower2 - Return bit-level equivalent of the expression 2.0^x</span></span><br><span class="line"><span class="comment"> *   (2.0 raised to the power x) for any 32-bit integer x.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   The unsigned value that is returned should have the identical bit</span></span><br><span class="line"><span class="comment"> *   representation as the single-precision floating-point number 2.0^x.</span></span><br><span class="line"><span class="comment"> *   If the result is too small to be represented as a denorm, return</span></span><br><span class="line"><span class="comment"> *   0. If too large, return +INF.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. Also if, while</span></span><br><span class="line"><span class="comment"> *   Max ops: 30</span></span><br><span class="line"><span class="comment"> *   Rating: 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">floatPower2</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 非规格化最小值</span></span><br><span class="line">    <span class="comment">// 0 00000000 00000000000000000000001</span></span><br><span class="line">    <span class="comment">// E = 1 - Bias = 1 - 127 = 126</span></span><br><span class="line">    <span class="comment">// frac = 1 * 2^-22</span></span><br><span class="line">    <span class="comment">// M = frac</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-148 </span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-148</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非规格化最大值</span></span><br><span class="line">    <span class="comment">// 0 000000 111111111111111111111111</span></span><br><span class="line">    <span class="comment">// E = 1 - Bias = 1 - 127 = -126</span></span><br><span class="line">    <span class="comment">// frac = 1 (近似,小于)</span></span><br><span class="line">    <span class="comment">// M = frac</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-126 (近似，小于)</span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">-126</span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">1</span> &lt;&lt;  (x + <span class="number">148</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 规格化最大值</span></span><br><span class="line">    <span class="comment">// 0 11111110 11111111111111111111111</span></span><br><span class="line">    <span class="comment">// E = exp - Bias = 254 - 127 = 127</span></span><br><span class="line">    <span class="comment">// M = 1 + frac = 1.111111111111111111111111</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^128 (近似,小于)</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">128</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0xFF</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 规格化最小值</span></span><br><span class="line">    <span class="comment">// 0 00000001 00000000000000000000000</span></span><br><span class="line">    <span class="comment">// E = exp - Bias = 1 - 127 = -126</span></span><br><span class="line">    <span class="comment">// M = 1 + frac = 1</span></span><br><span class="line">    <span class="comment">// V = 2^E * M = 2^-126</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">-126</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">exp</span> = x + <span class="number">127</span>;</span><br><span class="line">        <span class="keyword">return</span>  <span class="built_in">exp</span> &lt;&lt; <span class="number">23</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>求 <code>2.0^x</code> 的浮点数表示，只要抓住几个边界条件就行。</p>
<h3 id="测试一下"><a href="#测试一下" class="headerlink" title="测试一下"></a>测试一下</h3><p>最后我们运行一下测试程序，发现都通过了，开心。</p>
<center><img src="http://img.cuzz.site/20201019235030.png" width="80%"></center>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>主要考察整数和单精度浮点数的表示以及位运算，加强深对对计算机数据表示的理解。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/137284416">CSAPP:Lab1-Data Lab</a></li>
<li><a target="_blank" rel="noopener" href="https://wdxtub.com/csapp/thick-csapp-lab-1/2016/04/16/">【读厚 CSAPP】I Data Lab</a></li>
</ul>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/"><img class="fill" src="https://picsum.photos/542/330" alt="Spring 的复杂类型注入"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-09-28T16:00:46.000Z" title="2020-09-28T16:00:46.000Z">2020-09-29</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.737Z" title="2020-10-30T17:28:09.737Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/%E6%BA%90%E7%A0%81/">源码</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/">Spring 的复杂类型注入</a></h1><div class="content"><h2 id="Spring-的类型注入"><a href="#Spring-的类型注入" class="headerlink" title="Spring 的类型注入"></a>Spring 的类型注入</h2><p>先定义一个接口：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对应的有一些实现类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;myCat&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们用 Spring 比较常见的用类型注入和名称注入：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> Dog dog;    <span class="comment">// 按类型注入</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Resource(&quot;myCat&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Cat myCat;  <span class="comment">// 按名称注入</span></span><br></pre></td></tr></table></figure>

<p>然后今天在公司看到同事使用观察者模式的时候，使用了另外一种注入方式，注入的是<code>List&lt;XXX&gt;</code>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Animal&gt; animalList;</span><br></pre></td></tr></table></figure>

<p>这个时候注入的时候实现 Animal 这个接口的所有实现类</p></div><a class="article-more button is-small size-small" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/09/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3synchronized%E5%85%B3%E9%94%AE%E5%AD%97/"><img class="fill" src="https://picsum.photos/547/333" alt="深入理解 synchronized 关键字"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-09-09T15:59:59.000Z" title="2020-09-09T15:59:59.000Z">2020-09-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.830Z" title="2020-10-30T17:28:09.830Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/JAVA/">JAVA</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/09/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3synchronized%E5%85%B3%E9%94%AE%E5%AD%97/">深入理解 synchronized 关键字</a></h1><div class="content"><p>如果某一个资源被多个线程共享，为了避免因为资源抢占导致资源数据错乱，我们需要对线程进行同步，那么synchronized就是实现线程同步的关键字，是用来保证被锁定了代码同一时间只能有一个线程执行，那么synchronized关键字的实现原理是怎样的呢？</p>
<p>先给出一张图，看看 synchronized 这个关键字有多复杂，先看看能看懂多少，如果看不太懂，希望看完本文能真正理解 synchronized 关键字和这张图。</p>
<p><img src="http://img.cuzz.site/2020/4491294-e3bcefb2bacea224-20200910141026692.png"></p></div><a class="article-more button is-small size-small" href="/2020/09/09/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3synchronized%E5%85%B3%E9%94%AE%E5%AD%97/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/08/26/Dubbo_SPI%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"><img class="fill" src="https://picsum.photos/525/336" alt="Dubbo SPI源码分析"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-26T15:59:59.000Z" title="2020-08-26T15:59:59.000Z">2020-08-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.475Z" title="2020-10-30T17:28:09.475Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Dubbo/">Dubbo</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/08/26/Dubbo_SPI%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">Dubbo SPI源码分析</a></h1><div class="content"><p>对于一个优秀的框架需要很好的扩展性，给出一个接口，自己可以给出默认实现，同时也允许其他人实现拓展。即“对扩展开放，对修改封闭”的原则。Dubbo 采用微内核+插件的方式来实现，微内核架构中，内核通常采用 Factory、IoC、OSGi 等方式管理插件生命周期，Dubbo 最终决定采用 SPI 机制来加载插件，Dubbo SPI 参考 JDK 原生的 SPI 机制，进行了性能优化以及功能增强。</p>
<p>我们来看看 SPI 定义：</p>
<blockquote>
<p>Service Provider Interface (SPI) is an API intended to be implemented or extended by a third party. It can be used to enable framework extension and replaceable components.</p>
</blockquote></div><a class="article-more button is-small size-small" href="/2020/08/26/Dubbo_SPI%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/08/25/Understanding_Object_Oriented_Programming/"><img class="fill" src="https://picsum.photos/529/326" alt="Understanding Object Oriented Programming"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-25T13:54:59.000Z" title="2020-08-25T13:54:59.000Z">2020-08-25</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.751Z" title="2020-10-30T17:28:09.751Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/JAVA/">JAVA</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/08/25/Understanding_Object_Oriented_Programming/">Understanding Object Oriented Programming</a></h1><div class="content"><blockquote>
<p>这是一篇很早的文章，讲的关于面向对象，原文地址：<a target="_blank" rel="noopener" href="http://www.csis.pace.edu/~bergin/patterns/ppoop.html">Understanding Object Oriented Programming。</a>这里有关于这篇文章的评论<a target="_blank" rel="noopener" href="https://coolshell.cn/articles/8745.html">如此理解面向对象编程</a>，很有有趣。我觉得这篇作为一篇入门讲面向对象的例子还是很不错的，通过不同的例子讲述了不同人的实现想法。最后用策略模式+工厂模式来实现，来达到消除if-else。</p>
</blockquote>
<p>The code on this page grew out of a discussion on the Object Technology in Computer Science Education list server. The discussion had been going on for about 36 hours in late March and early April 2000 centered on the question of “What is OO really; is it a real paradigm, different from procedural programming or is it just a packaging mechanism for procedural programming?” Both of the authors believe that it is a real paradigm shift, requiring a change in mental model in the practitioners. Winder produced the first three of the following code fragments to show the difference in styles between hackers, procedural programmers, and (naive) object oriented programmers. Bergin then added the more sophisticated OO version that appears last.</p></div><a class="article-more button is-small size-small" href="/2020/08/25/Understanding_Object_Oriented_Programming/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2020/08/17/Let&#039;s_build_a_Full-Text_Search_engine/"><img class="fill" src="https://picsum.photos/528/345" alt="Let&#039;s build a Full-Text Search engine"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-17T13:54:59.000Z" title="2020-08-17T13:54:59.000Z">2020-08-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.576Z" title="2020-10-30T17:28:09.576Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/08/17/Let&#039;s_build_a_Full-Text_Search_engine/">Let&#039;s build a Full-Text Search engine</a></h1><div class="content"><blockquote>
<p>这是一篇转载文章<a target="_blank" rel="noopener" href="https://artem.krylysov.com/blog/2020/07/28/lets-build-a-full-text-search-engine/">原文地址</a>，原文讲述如何构建一个全文搜索引擎，用的 Go 实现的，本来想翻译一下，顺便用 Java 实现一下，由于翻译出来比较生硬，还是把原文放出来，顺便把我用 Java 实现的版本放在链接中<a target="_blank" rel="noopener" href="https://github.com/cuzz1/simplefts">Java实现版本</a>。</p>
</blockquote>
<p>Full-Text Search is one of those tools people use every day without realizing it. If you ever googled “golang coverage report” or tried to find “indoor wireless camera” on an e-commerce website, you used some kind of full-text search.</p>
<p>Full-Text Search (FTS) is a technique for searching text in a collection of documents. A document can refer to a web page, a newspaper article, an email message, or any structured text.</p>
<p>Today we are going to build our own FTS engine. By the end of this post, we’ll be able to search across millions of documents in less than a millisecond. We’ll start with simple search queries like “give me all documents that contain the word <em>cat</em>“ and we’ll extend the engine to support more sophisticated boolean queries.</p>
<p>Note</p>
<blockquote>
<p>Most well-known FTS engine is <a target="_blank" rel="noopener" href="https://lucene.apache.org/">Lucene</a> (as well as <a target="_blank" rel="noopener" href="https://github.com/elastic/elasticsearch">Elasticsearch</a> and Solr built on top of it).</p>
</blockquote></div><a class="article-more button is-small size-small" href="/2020/08/17/Let&#039;s_build_a_Full-Text_Search_engine/#more">Read more</a></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2019/10/11/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/"><img class="fill" src="https://picsum.photos/543/316" alt="Go语言入门笔记"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-10-11T15:59:59.000Z" title="2019-10-11T15:59:59.000Z">2019-10-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T17:28:09.491Z" title="2020-10-30T17:28:09.491Z">2020-10-31</time></span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/10/11/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/">Go语言入门笔记</a></h1><div class="content"><p>Go语言是Google开发的一种静态强类型、编译型、并发型，并具有垃圾回收功能的编程语言，它用批判吸收的眼光，融合C语言、Java等众家之长，将简洁、高效演绎得淋漓尽致。</p>
<p>Go语言起源于2007年，当时Google的技术大神们备受C++越来越臃肿的困扰，决心开发一种新的语言来取代C++。他们认为：与其在臃肿的语言上不断增加新的特性，不如简化编程语言。于是，Golang这门新语言应运而生。</p>
<p>在十年多的时间里，Go语言发展势头强劲，凭借其简洁、高效的特性，在竞争激烈的编程语言市场中占据了一席之地。Google、腾讯、阿里等大公司纷纷选择使用Go语言来开发服务应用项目。当然，和其他的编程语言一样，Go语言也有其自身的缺陷。</p></div><a class="article-more button is-small size-small" href="/2019/10/11/Go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/#more">Read more</a></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">Previous</a></div><div class="pagination-next"><a href="/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpeg" alt="cuzz"></figure><p class="title is-size-4 is-block line-height-inherit">cuzz</p><p class="is-size-6 is-block">爱技术，爱生活，爱分享。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国武汉</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">28</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">29</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/cuzz1" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/cuzz1"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/CSAPP/"><span class="level-start"><span class="level-item">CSAPP</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Dubbo/"><span class="level-start"><span class="level-item">Dubbo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Go/"><span class="level-start"><span class="level-item">Go</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JAVA/"><span class="level-start"><span class="level-item">JAVA</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Java-%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">Java 基础</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Netty/"><span class="level-start"><span class="level-item">Netty</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="level-start"><span class="level-item">分布式</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%BA%90%E7%A0%81/"><span class="level-start"><span class="level-item">源码</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">计算机基础</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E9%9D%A2%E8%AF%95/"><span class="level-start"><span class="level-item">面试</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Full-Text-Search/"><span class="tag">Full-Text Search</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Future/"><span class="tag">Future</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java8/"><span class="tag">Java8</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NIO/"><span class="tag">NIO</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OOP/"><span class="tag">OOP</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reactor/"><span class="tag">Reactor</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SPI/"><span class="tag">SPI</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Seata/"><span class="tag">Seata</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gdb/"><span class="tag">gdb</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lambda/"><span class="tag">lambda</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lintcode/"><span class="tag">lintcode</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/shell/"><span class="tag">shell</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/synchronized/"><span class="tag">synchronized</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6/"><span class="tag">二进制</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"><span class="tag">位运算</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%8D%E5%B0%84/"><span class="tag">反射</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%A0%86%E6%8E%92%E5%BA%8F/"><span class="tag">堆排序</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="tag">并发编程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B1%87%E7%BC%96/"><span class="tag">汇编</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B3%A8%E8%A7%A3/"><span class="tag">注解</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B5%AE%E7%82%B9%E6%95%B0/"><span class="tag">浮点数</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BA%90%E7%A0%81/"><span class="tag">源码</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%8B%B1%E6%96%87/"><span class="tag">英文</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="tag">计算机基础</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BD%AC%E8%BD%BD/"><span class="tag">转载</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%94%81/"><span class="tag">锁</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><a class="media-left" href="/2020/10/20/CSAPP_Boom_Lab/"><p class="image is-64x64"><img class="fill" src="https://picsum.photos/119" alt="Boom Lab"></p></a><div class="media-content size-small"><p><time dateTime="2020-10-20T15:59:59.000Z">2020-10-20</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/20/CSAPP_Boom_Lab/">Boom Lab</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></p></div></article><article class="media"><a class="media-left" href="/2020/10/20/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/"><p class="image is-64x64"><img class="fill" src="https://picsum.photos/106" alt="汇编入门"></p></a><div class="media-content size-small"><p><time dateTime="2020-10-20T15:59:59.000Z">2020-10-20</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/20/%E6%B1%87%E7%BC%96%E5%85%A5%E9%97%A8/">汇编入门</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></p></div></article><article class="media"><a class="media-left" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/"><p class="image is-64x64"><img class="fill" src="https://picsum.photos/110" alt="浮点数在计算机中的表示"></p></a><div class="media-content size-small"><p><time dateTime="2020-10-17T15:59:59.000Z">2020-10-17</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/17/%E6%B5%AE%E7%82%B9%E6%95%B0%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/">浮点数在计算机中的表示</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a></p></div></article><article class="media"><a class="media-left" href="/2020/10/11/CSAPP_Data_Lab/"><p class="image is-64x64"><img class="fill" src="https://picsum.photos/112" alt="Data Lab"></p></a><div class="media-content size-small"><p><time dateTime="2020-10-11T15:59:59.000Z">2020-10-11</time></p><p class="title is-6"><a class="link-muted" href="/2020/10/11/CSAPP_Data_Lab/">Data Lab</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/CSAPP/">CSAPP</a></p></div></article><article class="media"><a class="media-left" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/"><p class="image is-64x64"><img class="fill" src="https://picsum.photos/107" alt="Spring 的复杂类型注入"></p></a><div class="media-content size-small"><p><time dateTime="2020-09-28T16:00:46.000Z">2020-09-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/09/29/Spring%E7%9A%84%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5/">Spring 的复杂类型注入</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E6%BA%90%E7%A0%81/">源码</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">October 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">May 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">February 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/10/"><span class="level-start"><span class="level-item">October 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/09/"><span class="level-start"><span class="level-item">September 2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="cuzz&#039;s blog" height="28"></a><p class="size-small"><span>&copy; 2020 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: false,
                    fold: ''
                }
            }
        };</script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>